<!DOCTYPE html>
<html>

<head>
    <title>User Management System - Profile</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/alert.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <h1>User Profile</h1>
    <p><strong>Full Name:</strong> <span id="username"></span></p>
    <p><strong>Email:</strong> <span id="email"></span></p>
    <p><strong>Age:</strong> <span id="age"></span></p>
    <p><strong>Bio:</strong> <span id="bio"></span></p>
    <br>
    <button onclick="confirmEdit()">Edit Profile</button>
    <br>
    <button onclick="confirmDelete()">Delete Account</button>
    <br>
    <a href="../scripts/logout.php">Logout</a>

    <script>
        function confirmEdit() {
            Swal.fire({
                title: 'Do you want to edit your profile?',
                showCancelButton: true,
                confirmButtonText: 'Yes',
                cancelButtonText: 'No'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = 'edit_profile.html';
                }
            });
        }

        function confirmDelete() {
            Swal.fire({
                title: 'Are you sure you want to delete your account?',
                text: 'This action cannot be undone!',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes, delete my account',
                cancelButtonText: 'No, cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: 'Account Deleted',
                        text: 'Your account has been deleted.',
                        icon: 'success'
                    }).then(() => {
                        window.location.href = '../scripts/delete.php';
                    });
                }
            });
        }

        // Function to fetch profile data using AJAX
        function fetchProfileData() {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    var profileData = JSON.parse(xhr.responseText);
                    document.getElementById('username').textContent = profileData.username;
                    document.getElementById('email').textContent = profileData.email;
                    document.getElementById('age').textContent = profileData.age;
                    document.getElementById('bio').textContent = profileData.bio;
                }
            };
            xhr.open('GET', '../scripts/profile.php', true);
            xhr.send();
        }

        // Call the function to fetch profile data on page load
        window.onload = fetchProfileData;
    </script>
</body>

</html>
